# ИДЗ №3
*Шиндяпкин Илья Дмитриевич БПИ-219*
## Задание
### Вариант №23
Разработать программу, которая ищет в ASCII-строке заданную
подстроку и возвращает индекс первого символа первого вхождения подстроки в строке. Подстрока вводится как параметр.

## Задача на 4.
### Общая схема решаемой задачи:
1. Создание двух неименованных каналов.
2. Создание 1-го дочернего процесса.
3. 1-ый процесс должен считывать данные из файла и передавать их 2-ому. 
По 1-ому каналу передается строка.
4. Создание 2-го дочернего процесса.
5. 2-ой процесс получает строку от 1-го процесса и, используя подстроку, переданную как параметр,
возвращает первое ее вхождение в строке. Передает результат в 3-ий процесс по 2-ому каналу.
6. Создание 3-го дочернего процесса.
7. 3-ий процесс получает ответ от 2-го процесса и пишет его в выходной файл.

***
### Входные и выходные данные:
Данные считываются из входного и выходного файла. Имена файлов передаются как параметры
при запуске кода. В качестве 3-го параметра передается подстрока.

Передача данных в/из файлы(-ов) и каналы(-ов) производится с помощью системных вызовов write, read.

Буфер для считываемой из файла строки равен 5000 байт и читается из файла за одну операцию.
***
### Тесты:
В этой же директории есть папка с тестами, где есть входные данные и соответствующие им выходные.
Программа протестирована на входных данных и выдают корректные результаты. 
В папке с тестами также располагается файл, содержащий подстроку для каждого теста,
которую необходимо передавать, как параметр при запуске программы.

**Дублирование тестовых данных**:

Тест 1:

	Входные данные:
	akasdkacansasjdsussy
    sus

	Выходные данные:
    First index of substring occurence:15

Тест 2:

	Входные данные:
	here is only one but now in file we have whitespaces
    file
	
	Выходные данные:
    First index of substring occurence:28

Тест 3:

	Входные данные:
	And in this file word detected is detected twice
    detected

	Выходные данные:
    First index of substring occurence:22


Тест 4:

	Входные данные:
	there is no such substring!
    hello

	Выходные данные:
    First index of substring occurence:-1

Тест 5:

	Входные данные:
	*Empty file*
    world

	Выходные данные:
    First index of substring occurence:-1

***
### Пример компиляции, запуска программы и просмотр результатов:

    $ gcc program.c -o program

	$ ./program tests/input/1.in tests/output/1.out sus

	$ cat tests/output/1.out
***

## Задача на 5.
### Общая схема решаемой задачи:
1. Создание двух именованных каналов: 
- "string_pipe" - канал для передачи строки
- "answer_pipe" - анал для передачи ответа
2. Создание 1-го дочернего процесса.
3. 1-ый процесс должен считывать данные из файла и передавать их 2-ому.
   По каналу "string_pipe" передается строка.
4. Создание 2-го дочернего процесса.
5. 2-ой процесс получает строку от 1-го процесса и, используя подстроку, переданную как параметр,
   возвращает первое ее вхождение в строке. Передает результат в 3-ий процесс по каналу "answer_pipe".
6. Создание 3-го дочернего процесса.
7. 3-ий процесс получает ответ от 2-го процесса и пишет его в выходной файл.
***
*Все прочие требования идентичны тем, что были на оценку 4, и были успешно выполнены.
Программа была протестирована на тех же тестах и вернула корректные ответы.*
***

## Часть на 6.
### Общая схема решаемой задачи:
1. Создание двух неименованных каналов.
2. Создание 1-го дочернего процесса.
3. 1-ый процесс должен считывать данные из файла и передавать их 2-ому.
   По 1-ому каналу передается строка.
4. 1-ый процесс ожидает, пока в пайп поступит ответ.
5. Создание 2-ого дочерний процесс.
6. 2-ой процесс получает строку от 1-го процесса и, используя подстроку, переданную как параметр,
   возвращает первое ее вхождение в строке. Передает результат обратно в 1-ый процесс по 2-ому каналу.
7. 1-ый процесс получает ответ от 2-го процесса и пишет его в выходной файл.
***
*Все прочие требования идентичны тем, что были на оценку 4, и были успешно выполнены.
Программа была протестирована на тех же тестах и вернула корректные ответы.*
***

## Задача на 7.
### Общая схема решаемой задачи:
1. Создание двух именованных каналов:
- "string_pipe" - канал для передачи строки
- "answer_pipe" - анал для передачи ответа
2. Создание 1-го дочернего процесса.
3. 1-ый процесс должен считывать данные из файла и передавать их 2-ому.
   По каналу "string_pipe" передается строка.
4. 1-ый процесс ожидает, пока в пайп поступит ответ.
5. Создание 2-го дочернего процесса.
6. 2-ой процесс получает строку от 1-го процесса и, используя подстроку, переданную как параметр,
   возвращает первое ее вхождение в строке. Передает результат обартно в 1-ый процесс по каналу "answer_pipe".
7. 1-ый процесс получает ответ от 2-го процесса и пишет его в выходной файл.
***
*Все прочие требования идентичны тем, что были на оценку 4, и были успешно выполнены.
Программа была протестирована на тех же тестах и вернула корректные ответы.*
***

## Задача на 8.
### Общая схема решаемой задачи:
1. Создание двух независимых процессов.
2. Создание двух именованных каналов:
- "string_pipe" - канал для передачи строки
- "answer_pipe" - анал для передачи ответа
3. 1-ый процесс должен считывать данные из файла и передавать их 2-ому.
   По каналу "string_pipe" передается строка.
4. 1-ый процесс ожидает, пока в пайп поступит ответ.
5. 2-ой процесс получает строку от 1-го процесса и, используя подстроку, переданную как параметр,
   возвращает первое ее вхождение в строке. Передает результат обартно в 1-ый процесс по каналу "answer_pipe".
6. 1-ый процесс получает ответ от 2-го процесса и пишет его в выходной файл.
***
### Пример компиляции, запуска программы и просмотр результатов:
Программа состоит из двух частей, представляющие независимые процессы:
- Первый процесс - fileManager.c, отвечает за считвание и запись в файлы.
- Второй процесс - algorithm.c, отвечает за вычисление ответа.


    $ gcc algorithm.c -o algorithm

    $ gcc fileManager.c manager

	$ ./manager tests/input/1.in tests/output/1.out

    $ ./algorithm sus

	$ cat tests/output/1.out

***
*Все прочие требования идентичны тем, что были на оценку 4, и были успешно выполнены.
Программа была протестирована на тех же тестах и вернула корректные ответы.*
***